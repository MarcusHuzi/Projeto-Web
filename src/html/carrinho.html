<!DOCTYPE html>
<html lang="pt-br">
    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Carrinho </title>

        <link rel="stylesheet" href="../css/reset.css">
        <link rel="stylesheet" href="../css/carrinho.css">
        <link rel="stylesheet" href="../css/style.css">

        <style>
            [v-cloak] {
                display: none;
            }
        </style>

    </head>

    <body>

        <div class="container" id="app" v-cloak>
            <div class="navbar">
                <a href="">
                    <image src="../image/pngs/logo.png" class="logo"> </image>
                </a>
    
                <div class="searchbar">
                    <input type="text" placeholder="Busque por produtos aqui...">
                </div>

                <div class="navbar-icons">
                    <a href="">
                        <image src="../image/pngs/login.png" class="login"> </image>
                    </a>
                    <a href="">
                        <image src="../image/pngs/kart.png" class="kart"> </image>
                    </a>
                    <a href="">
                        <image src="../image/pngs/shop-list.png" class="shoplist"> </image>
                    </a>
                    <a href="">
                        <image src="../image/pngs/profile.png" class="profile"> </image>
                    </a>
                </div>
            </div>

            <div class="content">
                <div class="titulo">
                    <h1>Carrinho</h1>
                    <h2>Home > Carrinho</h2>
                    <hr/>
                </div>

                <div class="produtos">
                    <ul>
                        <prod-content @emit-price="updatePrice"></prod-content>
                    </ul>
                </div>

                <div class="botoes">
                    <button class="salvar-lista">
                        <h1>Salvar lista para compras futuras</h1>
                    </button>
                    <div class="botoes-compra">
                        <button class="finalizar-compra">
                            <h1>Finalizar compra</h1>
                        </button>
                        <div class="total-compra">
                            <h1>Preço Total</h1>
                            <div class="preco-box">
                                <h2>R$ {{ price.toFixed(2) }}</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer">
                <ul class="aboutus-section">
                    <li class="aboutus-item">
                        <h1>Sobre nós</h1>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Delectus accusantium accusamus qui quidem doloremque
                            At alias rerum, earum, non provident,
                            amet consectetur adipisicing elit, non provident</p>
                    </li>

                    <li class="aboutus-item">
                        <h1>SAC</h1>
                        <p>Email: email@email.com<br>
                            Telefone: (00) 99999-9999<br>
                            Horário: seg à sex | 08h00 - 16h00<br></p>
                    </li>

                    <li class="aboutus-item">
                        <h1>Links</h1>
                        <p>Home Page<br>
                            Carrinho<br>
                            Perfil<br></p>
                    </li>
                </ul>
            </div>

        </div>

        <template id="product-box-template">
            <li v-for="product in products">
                <div class="product-box">
                    <div class="prod-details">
                        <div class="prod-imagem-box">
                            <img :src="product.image_src" :alt="product.img_alt" class="prod-imagem">
                        </div>
                        <h2>{{ product.description }}</h2>
                    </div>
                    <div class="prod-quantity">
                        <input type="number" v-model="product.quantity" min="0" max="999">
                        <h2>R$ {{ (product.quantity * product.value).toFixed(2) }}</h2>
                    </div>
                </div>
            </li>
        </template>

        <script src="https://unpkg.com/vue@3"></script>

        <script>
            let app = Vue.createApp({
                data() {
                    return {
                        price: 0
                    }
                },
                methods: {
                    updatePrice(newValue) {
                        this.price = newValue
                    }
                }
            })

            app.component("prod-content",{
                template: "#product-box-template",
                data() {
                    return {
                        products: [
                            {
                                image_src: "../image/produtos/ype-clear.png",
                                image_alt: "ype-clear",
                                description: "Detergente Líquido Ypê Clear 500ml",
                                quantity: 0,
                                value: 2.39
                            },
                            {
                                image_src: "../image/produtos/ype-maca.png",
                                image_alt: "ype-maca",
                                description: "Detergente Líquido Ypê Maca 500ml",
                                quantity: 0,
                                value: 2.39
                            },
                            {
                                image_src: "../image/produtos/ype-neutro.png",
                                image_alt: "ype-neutro",
                                description: "Detergente Líquido Ypê Neutro 500ml",
                                quantity: 0,
                                value: 2.39
                            }
                        ]
                    }
                },
                computed: {
                    fullPrice() {
                        let price = 0
                        for (product of this.products){
                            price += product.value * product.quantity
                        }
                        return price
                    }
                },
                watch: {
                    fullPrice(newValue) {
                        this.$emit('emit-price', newValue)
                    }
                },
                emits: ['emit-price']
            })

            app.mount('#app')
        </script>

    </body>
</html>